% Script to split PNAS title data

bin_years = 10;

load('pnas_parsed.mat');

times_year_floor = floor(times_year);
cur_year = times_year_floor(1);

pnas_split = {};
t = 0;
while 1
  t = t + 1;
  % Check if any more documents remain
  idxs = find(times_year >= cur_year & times_year < cur_year + bin_years);
  if isempty(idxs)
    break;
  end
  
  pnas_split{t}.data = data(idxs,:);
  pnas_split{t}.titles = titles(idxs,:);
  pnas_split{t}.times = times(idxs,:);
  pnas_split{t}.times_year = times_year(idxs,:);
  
  cur_year = cur_year + bin_years;
end

save('pnas_split.mat','pnas_split','vocab');
